<!--pages/learning/learning.wxml-->
<view class="learning-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="page-header">
    <view class="header-left" bindtap="goBack">
      <text class="back-icon">â€¹</text>
    </view>
    <view class="header-title">å­¦ä¹ è®°å½•</view>
    <view class="header-right" bindtap="clearHistory">
      <text class="clear-btn">æ¸…ç©º</text>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-grid">
    <view class="stat-card">
      <view class="stat-icon">ğŸ“š</view>
      <view class="stat-value">{{stats.totalArticles}}</view>
      <view class="stat-label">é˜…è¯»æ–‡ç« </view>
    </view>
    <view class="stat-card">
      <view class="stat-icon">â±ï¸</view>
      <view class="stat-value">{{stats.totalTime}}</view>
      <view class="stat-label">å­¦ä¹ æ—¶é•¿(åˆ†)</view>
    </view>
    <view class="stat-card">
      <view class="stat-icon">ğŸ’¬</view>
      <view class="stat-value">{{stats.totalChats}}</view>
      <view class="stat-label">AIå¯¹è¯</view>
    </view>
    <view class="stat-card">
      <view class="stat-icon">ğŸ“…</view>
      <view class="stat-value">{{stats.continuousDays}}</view>
      <view class="stat-label">è¿ç»­ç­¾åˆ°</view>
    </view>
  </view>

  <!-- Tabåˆ‡æ¢ -->
  <view class="tab-bar">
    <view class="tab-item {{currentTab === 'articles' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="articles">
      é˜…è¯»å†å²
    </view>
    <view class="tab-item {{currentTab === 'chats' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="chats">
      å¯¹è¯è®°å½•
    </view>
  </view>

  <!-- é˜…è¯»å†å²åˆ—è¡¨ -->
  <view wx:if="{{currentTab === 'articles'}}" class="history-list">
    <view wx:for="{{readHistory}}" wx:key="id" 
          class="history-item" 
          bindtap="viewArticle" 
          data-id="{{item.id}}">
      <view class="history-content">
        <view class="history-title">{{item.title}}</view>
        <view class="history-meta">
          <text class="meta-time">{{item.readTime}}åˆ†é’Ÿ</text>
          <text class="meta-date">{{item.date}}</text>
        </view>
      </view>
      <view class="history-arrow">â€º</view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{readHistory.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“–</text>
      <view class="empty-text">æš‚æ— é˜…è¯»è®°å½•</view>
      <view class="empty-hint">å»é¦–é¡µé˜…è¯»åè¯ˆæ–‡ç« å§ï¼</view>
    </view>
  </view>

  <!-- AIå¯¹è¯è®°å½• -->
  <view wx:if="{{currentTab === 'chats'}}" class="chat-summary">
    <view class="summary-card">
      <view class="summary-icon">ğŸ¤–</view>
      <view class="summary-content">
        <view class="summary-title">AIå¯¹è¯ç»Ÿè®¡</view>
        <view class="summary-text">ç´¯è®¡ä¸AIåŠ©æ‰‹å¯¹è¯ {{stats.totalChats}} æ¬¡</view>
        <view class="summary-hint">å¯¹è¯è®°å½•æœ¬åœ°å­˜å‚¨ï¼Œä¿æŠ¤æ‚¨çš„éšç§</view>
      </view>
    </view>
    
    <button class="goto-chat-btn" bindtap="{{()=>{wx.switchTab({url:'/pages/chat/chat'});}}}">
      å‰å¾€å¯¹è¯
    </button>
  </view>
</view>
