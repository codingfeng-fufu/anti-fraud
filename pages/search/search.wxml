<!--
æœç´¢é¡µé¢ - æœç´¢æ¨¡å— (v3)

ä¸Šæ¸¸ä¾èµ–ï¼šäº‘å‡½æ•°(searchArticles/searchUsers)
å…¥å£ï¼š/pages/search/search?keyword=xxx (å¯é€‰)
ä¸»è¦åŠŸèƒ½ï¼šæœç´¢èµ„è®¯ä¸ç”¨æˆ·
è¾“å‡ºï¼šæœç´¢ç»“æœåˆ—è¡¨

é‡è¦ï¼šæ¯å½“æ‰€å±çš„ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¿…é¡»å¯¹ç›¸åº”çš„æ–‡æ¡£è¿›è¡Œæ›´æ–°æ“ä½œï¼
-->
<view class="container">
  <view class="page-header">
    <view class="header-left" bindtap="goBack"><text class="back-icon">â€¹</text></view>
    <view class="header-title">æœç´¢</view>
    <view class="header-right"></view>
  </view>

  <view class="search-box">
    <input class="search-input" placeholder="æœç´¢èµ„è®¯æˆ–ç”¨æˆ·..." value="{{keyword}}"
      bindinput="onInput" confirm-type="search" bindconfirm="doSearch"/>
    <button class="search-btn" bindtap="doSearch">æœç´¢</button>
  </view>

  <view class="tabs">
    <view class="tab {{tab==='articles'?'active':''}}" bindtap="switchTab" data-tab="articles">èµ„è®¯</view>
    <view class="tab {{tab==='users'?'active':''}}" bindtap="switchTab" data-tab="users">ç”¨æˆ·</view>
  </view>

  <view class="result">
    <view wx:if="{{loading}}" class="loading">æœç´¢ä¸­...</view>

    <view wx:if="{{!loading && tab==='articles'}}">
      <view wx:if="{{articles.length===0}}" class="empty">æš‚æ— èµ„è®¯ç»“æœ</view>
      <view wx:for="{{articles}}" wx:key="id" class="a-item" bindtap="openArticle" data-id="{{item.id}}">
        <view class="a-title">{{item.title}}</view>
        <view class="a-meta">
          <text class="a-tag">{{item.tag}}</text>
          <text class="a-views">ğŸ‘ï¸ {{item.views}}</text>
        </view>
      </view>
    </view>

    <view wx:if="{{!loading && tab==='users'}}">
      <view wx:if="{{users.length===0}}" class="empty">æš‚æ— ç”¨æˆ·ç»“æœ</view>
      <view wx:for="{{users}}" wx:key="uid" class="u-item" bindtap="openUser" data-uid="{{item.uid}}">
        <image class="u-avatar" wx:if="{{item.avatarUrl}}" src="{{item.avatarUrl}}" mode="aspectFill"></image>
        <view class="u-avatar placeholder" wx:else>ğŸ‘¤</view>
        <view class="u-info">
          <view class="u-name">{{item.nickName}}</view>
          <view class="u-sub">UID: {{item.uid}} Â· ç­”é¢˜ç§¯åˆ† {{item.quizPoints || 0}}</view>
        </view>
      </view>
    </view>
  </view>
</view>

