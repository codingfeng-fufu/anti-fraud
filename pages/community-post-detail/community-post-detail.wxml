<!--
å¸–å­è¯¦æƒ…é¡µé¢ - ç¤¾åŒºæ¨¡å— (v3)

ä¸Šæ¸¸ä¾èµ–ï¼šäº‘å‡½æ•°(getPostDetail/getComments/createComment)
å…¥å£ï¼š/pages/community-post-detail/community-post-detail?id=xxx
ä¸»è¦åŠŸèƒ½ï¼šå±•ç¤ºå¸–å­è¯¦æƒ…ä¸è¯„è®ºåŒºï¼Œæ”¯æŒè¯„è®ºä¸å›å¤
è¾“å‡ºï¼šå¸–å­å†…å®¹ä¸è¯„è®ºåˆ—è¡¨æ¸²æŸ“

é‡è¦ï¼šæ¯å½“æ‰€å±çš„ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¿…é¡»å¯¹ç›¸åº”çš„æ–‡æ¡£è¿›è¡Œæ›´æ–°æ“ä½œï¼
-->
<view class="container">
  <view class="page-header">
    <view class="header-left" bindtap="goBack"><text class="back-icon">â€¹</text></view>
    <view class="header-title">å¸–å­è¯¦æƒ…</view>
    <view class="header-right"></view>
  </view>

  <view class="post-card" wx:if="{{post}}">
    <view class="post-header">
      <image class="avatar" wx:if="{{post.authorAvatarUrl}}" src="{{post.authorAvatarUrl}}" mode="aspectFill" bindtap="goProfile" data-uid="{{post.authorUid}}"></image>
      <view class="avatar placeholder" wx:else bindtap="goProfile" data-uid="{{post.authorUid}}">ğŸ‘¤</view>
      <view class="meta">
        <view class="name">{{post.authorNickName || 'æœªè®¾ç½®æ˜µç§°'}}</view>
        <view class="time">{{post.createdAtText}}</view>
      </view>
    </view>
    <view class="content" wx:if="{{post.content}}">{{post.content}}</view>
    <view class="images" wx:if="{{post.images && post.images.length > 0}}">
      <image wx:for="{{post.images}}" wx:key="*this" class="img" src="{{item}}" mode="aspectFill"></image>
    </view>
  </view>

  <view class="comments-card">
    <view class="comments-title">è¯„è®º ({{comments.length}})</view>

    <view wx:if="{{comments.length === 0}}" class="empty">æš‚æ— è¯„è®ºï¼Œæ¥æŠ¢æ²™å‘å§</view>

    <view wx:for="{{comments}}" wx:key="_id" class="comment-item {{item.parentId ? 'reply' : ''}}">
      <image class="c-avatar" wx:if="{{item.authorAvatarUrl}}" src="{{item.authorAvatarUrl}}" mode="aspectFill" bindtap="goProfile" data-uid="{{item.authorUid}}"></image>
      <view class="c-avatar placeholder" wx:else bindtap="goProfile" data-uid="{{item.authorUid}}">ğŸ‘¤</view>
      <view class="c-body">
        <view class="c-top">
          <text class="c-name">{{item.authorNickName || 'æœªè®¾ç½®æ˜µç§°'}}</text>
          <text class="c-time">{{item.createdAtText}}</text>
        </view>
        <view class="c-content">
          <text wx:if="{{item.replyToNickName}}" class="reply-to">å›å¤ {{item.replyToNickName}}ï¼š</text>
          {{item.content}}
        </view>
        <view class="c-actions">
          <text class="c-reply" bindtap="startReply" data-id="{{item._id}}" data-uid="{{item.authorUid}}" data-name="{{item.authorNickName}}">å›å¤</text>
        </view>
      </view>
    </view>
  </view>

  <view class="input-bar">
    <input class="input" placeholder="{{replyPlaceholder}}" value="{{inputText}}" bindinput="onInput" confirm-type="send" bindconfirm="submitComment" />
    <button class="send" bindtap="submitComment">å‘é€</button>
  </view>
</view>

