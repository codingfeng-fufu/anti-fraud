<!--
æˆå°±é¡µé¢ - æˆå°±ç³»ç»Ÿæ¨¡å—

ä¸Šæ¸¸ä¾èµ–ï¼šachievements.jsé¡µé¢é€»è¾‘ï¼Œachievements.wxssæ ·å¼æ–‡ä»¶
å…¥å£ï¼šé¡µé¢è·¯ç”±è·³è½¬è‡³/pages/achievements/achievements
ä¸»è¦åŠŸèƒ½ï¼šå±•ç¤ºç”¨æˆ·æˆå°±åˆ—è¡¨ã€æˆå°±è§£é”çŠ¶æ€ã€æˆå°±ç»Ÿè®¡æ•°æ®
è¾“å‡ºï¼šæ¸²æŸ“æˆå°±ç•Œé¢ï¼Œè§¦å‘JSäº‹ä»¶å¤„ç†å™¨

é‡è¦ï¼šæ¯å½“æ‰€å±çš„ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¿…é¡»å¯¹ç›¸åº”çš„æ–‡æ¡£è¿›è¡Œæ›´æ–°æ“ä½œï¼
-->
<!--pages/achievements/achievements.wxml-->
<view class="achievements-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="page-header">
    <view class="header-left" bindtap="goBack">
      <text class="back-icon">â€¹</text>
    </view>
    <view class="header-title">æˆ‘çš„æˆå°±</view>
    <view class="header-right"></view>
  </view>

  <!-- æˆå°±æ¦‚è§ˆå¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-content">
      <view class="stats-icon">ğŸ†</view>
      <view class="stats-info">
        <view class="stats-title">æˆå°±è¿›åº¦</view>
        <view class="stats-desc">å·²è§£é” {{stats.unlocked}}/{{stats.total}} ä¸ªæˆå°±</view>
      </view>
      <view class="stats-progress-box">
        <view class="stats-percent">{{stats.progress}}%</view>
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{stats.progress}}%"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç”¨æˆ·æ•°æ®ç»Ÿè®¡ -->
  <view class="user-data">
    <view class="data-item">
      <view class="data-value">{{signDays}}</view>
      <view class="data-label">è¿ç»­ç­¾åˆ°</view>
    </view>
    <view class="data-item">
      <view class="data-value">{{totalPoints}}</view>
      <view class="data-label">æ€»ç§¯åˆ†</view>
    </view>
    <view class="data-item">
      <view class="data-value">{{readArticles}}</view>
      <view class="data-label">é˜…è¯»æ–‡ç« </view>
    </view>
    <view class="data-item">
      <view class="data-value">{{chatTimes}}</view>
      <view class="data-label">AIå¯¹è¯</view>
    </view>
  </view>

  <!-- æˆå°±åˆ—è¡¨ -->
  <view class="achievements-list">
    <view class="section-title">å…¨éƒ¨æˆå°±</view>
    
    <view wx:for="{{achievements}}" wx:key="id"
          class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}">
      
      <view class="achievement-icon-wrapper">
        <text class="achievement-emoji">{{item.icon}}</text>
        <view wx:if="{{item.unlocked}}" class="achievement-checkmark">
          <text class="checkmark-icon">âœ“</text>
        </view>
      </view>

      <view class="achievement-content">
        <view class="achievement-header">
          <text class="achievement-name">{{item.title}}</text>
          <text wx:if="{{item.unlocked && item.points > 0}}" class="achievement-badge">+{{item.points}}</text>
        </view>
        <text class="achievement-description">{{item.desc}}</text>
        <view wx:if="{{item.unlocked && item.earnedAtText}}" class="achievement-earned-at">
          <text class="earned-label">è¾¾æˆæ—¶é—´ {{item.earnedAtText}}</text>
        </view>
        <view wx:if="{{item.unlocked && item.rewardTitleName}}" class="achievement-reward">
          <text class="reward-label">ğŸ† {{item.rewardTitleName}}</text>
        </view>
      </view>

      <view class="achievement-action" wx:if="{{item.unlocked}}">
        <view class="action-btn" bindtap="shareAchievement" data-id="{{item.id}}">
          <text class="action-text">åˆ†äº«</text>
        </view>
      </view>

      <view class="achievement-progress" wx:if="{{!item.unlocked}}">
        <view class="progress-container">
          <view class="progress-track"></view>
          <view class="progress-value" style="width: {{item.current / item.target * 100}}%"></view>
        </view>
        <text class="progress-label">{{item.current}}/{{item.target}}</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view wx:if="{{stats.unlocked === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ¯</text>
    <view class="empty-text">è¿˜æ²¡æœ‰è§£é”ä»»ä½•æˆå°±</view>
    <view class="empty-hint">å®Œæˆç­¾åˆ°ã€é˜…è¯»æ–‡ç« ã€AIå¯¹è¯æ¥è§£é”æˆå°±å§ï¼</view>
  </view>
</view>
